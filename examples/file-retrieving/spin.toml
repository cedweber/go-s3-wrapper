spin_manifest_version = 2

[application]
name = "file-retrieving"
version = "0.1.0"
authors = ["Cedric Weber <cedric_oliver.weber@stackit.cloud>"]
description = "Example File Retrieving"

[[trigger.http]]
route = "/..."
component = "retrieve"

[variables]
access_token = { required = true }
secret_token = { required = true }
base_url = { required = true }
region = { required = true }
bucket = { required = true }

[component.retrieve]
source = "main.wasm"
allowed_outbound_hosts = ["https://*:*"]
[component.retrieve.build]
command = "tinygo build -target=wasip2 --wit-package $(go list -mod=readonly -m -f '{{.Dir}}' github.com/spinframework/spin-go-sdk/v2)/wit --wit-world http-trigger -o main.wasm main.go"
watch = ["**/*.go", "go.mod"]

[component.retrieve.variables]
access_token = "{{ access_token }}"
secret_token  = "{{ secret_token }}"
base_url = "{{ base_url }}"
region = "{{ region }}"
bucket = "{{ bucket }}"